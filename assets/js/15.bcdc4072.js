(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{415:function(s,a,t){"use strict";t.r(a);var n=t(12),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("本文介绍ubuntu用户操作相关的内容，主要包括查看用户列表，创建及删除用户")]),s._v(" "),t("p",[s._v("主要针对ubuntu中带有用户文件夹：/home文件夹下的用户进行管理")])]),s._v(" "),t("h2",{attrs:{id:"获取用户列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取用户列表"}},[s._v("#")]),s._v(" 获取用户列表")]),s._v(" "),t("p",[s._v("要操作当前用户，必须获取当前用户的列表，网上提供了很多花里胡哨的办法，涉及用户组操作，但是在web开发者使用中，只会用到普通用户和超级用户，超级用户直接使用"),t("code",[s._v("sudo")]),s._v("或者切换到"),t("code",[s._v("sudo su")]),s._v("进行操作，普通用户列表如何获取？ 本文提供以下两个方法：")]),s._v(" "),t("h3",{attrs:{id:"通过-home下文件夹进行识别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过-home下文件夹进行识别"}},[s._v("#")]),s._v(" 通过/home下文件夹进行识别")]),s._v(" "),t("p",[s._v("直接上bash")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接获取文件夹目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /home\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地存在admin 和 devuser两个用户，执行命令以后，会有以下结果")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" devuser lost+found admin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其中lost+found自己忽略掉就好了，其他就是我们需要的普通用户的用户名")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("这个方法原理简单，普通用户会创建自己的用户文件夹，直接获取/home文件夹树获得用户列表，缺点是有个lost+found比较麻烦，自己忽略掉就好了。")]),s._v(" "),t("h3",{attrs:{id:"读取-etc-passwd文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取-etc-passwd文件"}},[s._v("#")]),s._v(" 读取/etc/passwd文件")]),s._v(" "),t("p",[s._v("同样直接上代码")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是网上能查到的通用的命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/passwd\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是输出的结果完全不能看，对结果进行过滤")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/passwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" /bin/bash\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对于上面的用户情况，输出以下内容，简单明了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" root:x:0:0:root:/root:/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" admin:x:1000:1000:xiongfan,,,:/home/admin:/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" devuser:x:1001:1001:,,,:/home/devuser:/bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("网上盛传的对原指令的优化为"),t("code",[s._v('cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk -F":" \'{ print $1"|"$3"|"$4 }\'|more')]),s._v("同样能看到用户列表，但是要有很多其他用户组的信息，采用我的方法看起来更简单。")]),s._v(" "),t("p",[s._v("这个方法原理也很简单，执行一个简单的管道操作，对用户调用的bash进行过滤。")]),s._v(" "),t("h2",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建用户，[uesrname]为你想创建的新用户的名字")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照提示设置密码及信息即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给目标用户赋予root权限: 修改/etc/sudoers文件，文件内有注释，按照注释添加就可以")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 举个例子")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建dev用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev ALL=(ALL) ALL'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/sudoers "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将授权语句写入文件，使用vim操作也可以，没区别")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[s._v("#")]),s._v(" 删除用户")]),s._v(" "),t("p",[s._v("先上命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除用户，[uesrname]为你想删除新用户的名字")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 举个例子")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" -r dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("简单介绍")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# userdel语法")]),s._v("\nuserdel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选项")]),s._v("\n-f："),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制删除用户，即使用户当前已登录；")]),s._v("\n-r："),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除用户的同时，删除与用户相关的所有文件。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数")]),s._v("\n用户名\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[s._v("#")]),s._v(" TODO")]),s._v(" "),t("p",[s._v("后续增加用户组及权限相关的内容。")])])}),[],!1,null,null,null);a.default=e.exports}}]);